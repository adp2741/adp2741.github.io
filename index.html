<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Spinner - Default functionality</title>
  <style>
    .btn, .btn-type, .btn-roll, .btn-reset {
      border: 0;
      outline: 0;
      display: inline-block;
      background-color: #ddd;
      border-radius: 3px;
      padding: 10px 12px;
    }

    .btn.active, .btn-type.active {
      background-color: #000;
      color: #fff;
    }

    .btn-roll:active, .btn-reset:active {
      background-color: #000;
      color: #fff;
    }
  </style>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script>

  function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function clearData() {
    var elements = document.getElementById("output").getElementsByClassName("line");
    while (elements.length > 0) {
        elements[0].parentNode.removeChild(elements[0]);
    }
  }

  function calculateAndPrintOut(numDie, dieType, withAdvantage, modifier) {
      // Clean up old lines
      var parentContainer = document.getElementById("output");

      var elements = document.getElementById("output").getElementsByClassName("line");

      while (elements.length > 0) {
          elements[0].parentNode.removeChild(elements[0]);
      }

      var totalAmount = 0

      for (i = 0; i < numDie; i++) {
          var currentRoll = getRandomInt(1, dieType);

              // Take higher roll
              if (withAdvantage) {
                  secondRoll = getRandomInt(1, dieType);
                  if (secondRoll > currentRoll) {
                    currentRoll = secondRoll;
                  }
              }

            // Add modifier
            currentRoll += modifier

            var line = document.createElement("p");
            line.className = "line";
            line.innerHTML = currentRoll;
            parentContainer.appendChild(line);
        }
  }

  $(function() {
    var numDie = 1;
    var dieType = 4;
    var withAdvantage = false;
    var modifier = 0;

    $('.btn').on('click', function(e) {
      $('.btn.active').removeClass('active');
      $(this).addClass('active');
      numDie = this.id
      e.preventDefault();
    });

    $('.btn-type').on('click', function(e) {
      $('.btn-type.active').removeClass('active');
      $(this).addClass('active');
      dieType = this.id
      e.preventDefault();
    });

    $('.btn-roll').on('click', function(e) {
      var modifier = parseInt(document.getElementById("modifier").value);
      calculateAndPrintOut(numDie, dieType, withAdvantage, modifier)
      e.preventDefault();
    });

    $('.btn-reset').on('click', function(e) {
      $('.btn.active').removeClass('active');
      $('.btn-type.active').removeClass('active');
      $('.default').addClass('active');
      numDie = 1;
      dieType = 4;
      withAdvantage = false;
      modifier = 0;
      document.getElementById("modifier").value = 0;
      clearData();
      e.preventDefault();
    });
  });

  </script>
</head>
<body>
  <h5>Number of Die</h5>

  <button id="1" class="default btn active">1</button>
  <button id="2" class="btn">2</button>
  <button id="3" class="btn">3</button>
  <button id="4" class="btn">4</button>
  <button id="5" class="btn">5</button>
  <button id="6" class="btn">6</button>

  <h5>Die Type</h5>

  <button id="4" class="default btn-type active">D4</button>
  <button id="6" class="btn-type">D6</button>
  <button id="8" class="btn-type">D8</button>
  <button id="10" class="btn-type">D10</button>
  <button id="12" class="btn-type">D12</button>
  <button id="20" class="btn-type">D20</button>

  <h5>Modifier: <input type="text" id="modifier" value="0"></h5>

  <p>
    <button id="getvalue" class="btn-roll">Roll</button>
    <button class="btn-reset">Reset</button>
  </p>

  <div id="output">
  </div>


</body>
</html>
