<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Spinner - Default functionality</title>
  <style>

      body {
          font-family: -apple-system, BlinkMacSystemFont, sans-serif;
          width: 400px;
      }

      /* .center {
          width: 90%;
          padding: 10px;
          margin: 0 auto;
      } */

      .center {
          position:relative;
          left:10%; //Moves the element to the left by 50%
          transform: translateX(-10%); //get half of the element's width and subtract that value with left's value
      }

      button {
        border: 0;
        outline: 0;
        display: inline-block;
        background-color: #ddd;
        border-radius: 3px;
        padding: 12px 12px;
      }

      .btn {
        width: 45px;
        height: 45px;
      }

      .buttonLine {
          padding: 3px 6px;
      }

      .btn.active, .btn-type.active, .btn-withAdvantage.active {
          background-color: #000;
          color: #fff;
      }

      .btn-roll:active, .btn-reset:active {
          background-color: #000;
          color: #fff;
      }

      .withMeaning {
          font-size: 125%;
      }

  </style>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script>

  function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function clearData() {
    var elements = document.getElementById("output").getElementsByClassName("line");
    while (elements.length > 0) {
        elements[0].parentNode.removeChild(elements[0]);
    }
  }

  function calculateAndPrintOut(numDie, dieType, withAdvantage, modifier) {
        // Clean up old lines
        var parentContainer = document.getElementById("output");
        var elements = document.getElementById("output").getElementsByClassName("line");

        while (elements.length > 0) {
            elements[0].parentNode.removeChild(elements[0]);
        }

        var totalAmount = 0

        for (i = 0; i < numDie; i++) {
            var firstRoll = getRandomInt(1, dieType) + modifier;
            var output = firstRoll;

              if (withAdvantage) {
                  secondRoll = getRandomInt(1, dieType) + modifier;
                  if (secondRoll > firstRoll) {
                    secondRoll = "<b class='withMeaning'>" + secondRoll + "</b>";
                  } else  {
                    firstRoll = "<b class='withMeaning'>" + firstRoll + "</b>";
                  }
                  output = firstRoll + " : " + secondRoll;
              } else {
                totalAmount += firstRoll;
              }

              var line = document.createElement("p");
              line.className = "line";
              line.innerHTML = output;
              parentContainer.appendChild(line);
        }
        if (withAdvantage == false) {
            var line = document.createElement("p");
            line.className = "line";
            line.innerHTML = "<b class='withMeaning'>TOTAL: " + totalAmount + "</b>";
            parentContainer.appendChild(line);
        }
  }

  $(function() {
    var numDie = 1;
    var dieType = 4;
    var withAdvantage = false;
    var modifier = 0;

    $('.btn-withAdvantage').on('click', function(e) {
      withAdvantage = !withAdvantage
      if (withAdvantage) {
          $(this).addClass('active');
      } else {
          $(this).removeClass('active')
      }
      e.preventDefault();
    });

    $('.btn').on('click', function(e) {
      $('.btn.active').removeClass('active');
      $(this).addClass('active');
      numDie = this.id
      e.preventDefault();
    });

    $('.btn-type').on('click', function(e) {
      $('.btn-type.active').removeClass('active');
      $(this).addClass('active');
      dieType = this.id
      e.preventDefault();
    });

    $('.btn-roll').on('click', function(e) {
      var modifier = parseInt(document.getElementById("modifier").value);
      calculateAndPrintOut(numDie, dieType, withAdvantage, modifier)
      e.preventDefault();
    });

    $('.btn-reset').on('click', function(e) {
      $('.btn.active').removeClass('active');
      $('.btn-type.active').removeClass('active');
      $('.btn-withAdvantage.active').removeClass('active');
      $('.default').addClass('active');
      numDie = 1;
      dieType = 4;
      withAdvantage = false;
      modifier = 0;
      document.getElementById("modifier").value = 0;
      clearData();
      e.preventDefault();
    });
  });

  </script>
</head>
<body>

  <div class="center">
      <h5>Number of Die</h5>

      <div class="buttonLine">
          <button id="1" class="default btn active">1</button>
          <button id="2" class="btn">2</button>
          <button id="3" class="btn">3</button>
          <button id="4" class="btn">4</button>
          <button id="5" class="btn">5</button>
      </div>
      <div class="buttonLine">
          <button id="6" class="btn">6</button>
          <button id="7" class="btn">7</button>
          <button id="8" class="btn">8</button>
          <button id="9" class="btn">9</button>
          <button id="10" class="btn">10</button>
      </div>

      <h5>Die Type</h5>

      <button id="4" class="default btn-type active">D4</button>
      <button id="6" class="btn-type">D6</button>
      <button id="8" class="btn-type">D8</button>
      <button id="10" class="btn-type">D10</button>
      <button id="12" class="btn-type">D12</button>
      <button id="20" class="btn-type">D20</button>
  </div>

  <p class="center">
      <button class="btn-withAdvantage">Advantage</button>
  </p>

  <h5 class="center">Modifier: <input type="text" id="modifier" value="0"></h5>

  <p class="center">
      <button id="getvalue" class="btn-roll">Roll</button>
      <button class="btn-reset">Reset</button>
  </p>

  <div id="output" class="center">
  </div>


</body>
</html>
